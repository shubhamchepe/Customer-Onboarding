<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PMEGPCUSTOMERBank.PopUp.DistrictSelectionPage"
             BackgroundColor="White"
             Title="Districts">

    <VerticalStackLayout Padding="15" Spacing="10">

        <!-- Header Row with Back Button -->
        <Grid ColumnDefinitions="Auto,*" Padding="0,0,0,5">
            <Button Text="â† Back"
                    BackgroundColor="Transparent"
                    TextColor="Black"
                    FontSize="16"
                    Clicked="OnBackClicked"/>
            <Label Text="Districts"
                   Grid.Column="1"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   FontSize="18"
                   FontAttributes="Bold"/>
        </Grid>

        <!-- Search Bar -->
        <SearchBar x:Name="searchBar" 
                   Placeholder="Search District..."
                   TextChanged="OnSearchBarTextChanged"
                   BackgroundColor="#f5f5f5"
                   HeightRequest="40"/>

        <!-- Table Header -->
        <Grid ColumnDefinitions="1.5*,3*,Auto" Padding="8" BackgroundColor="#eeeeee">
            <Label Text="District Code" FontAttributes="Bold" FontSize="14"/>
            <Label Text="District Name" Grid.Column="1" FontAttributes="Bold" FontSize="14"/>
            <Label Text="Action" Grid.Column="2" FontAttributes="Bold" FontSize="14"/>
        </Grid>

        <!-- Table Body -->
        <CollectionView x:Name="districtCollection"
                        ItemsSource="{Binding Districts}"
                        SelectionMode="None"
                        HeightRequest="400">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid ColumnDefinitions="1.5*,3*,Auto"
                          Padding="8"
                          BackgroundColor="White"
                          Margin="0,0,0,1">

                        <!-- District Code -->
                        <Label Text="{Binding District_Code}"
                               VerticalOptions="Center"
                               FontSize="14"/>

                        <!-- District Name -->
                        <Label Text="{Binding District_Name}"
                               Grid.Column="1"
                               VerticalOptions="Center"
                               FontSize="14"/>

                        <!-- Select Button -->
                        <Button Text="Select"
                                Grid.Column="2"
                                BackgroundColor="Green"
                                TextColor="White"
                                FontSize="14"
                                CornerRadius="5"
                                Padding="10,3"
                                Clicked="OnSelectClicked"/>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </VerticalStackLayout>
</ContentPage>
